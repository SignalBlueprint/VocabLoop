@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

/* Dark mode base styles */
.dark {
  color-scheme: dark;
}

/* Dark mode text defaults */
.dark body {
  @apply text-gray-100;
}

/* Mobile-friendly defaults */
html {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}

/* Prevent pull-to-refresh on mobile */
body {
  overscroll-behavior-y: contain;
}

/* Minimum touch target size (44x44px recommended by Apple) */
button, [role="button"], input[type="checkbox"] {
  min-height: 44px;
  min-width: 44px;
}

/* Exception for small inline buttons */
button.text-xs, button.text-sm {
  min-height: auto;
  min-width: auto;
}

/* Safe area insets for notched phones */
@supports (padding: max(0px)) {
  .p-4 {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Card flip animation */
.card-flip-container {
  perspective: 1000px;
}

.card-flip {
  animation: cardFlip 0.4s ease-out;
  transform-style: preserve-3d;
}

@keyframes cardFlip {
  0% {
    transform: rotateY(0deg) scale(1);
  }
  50% {
    transform: rotateY(90deg) scale(0.95);
  }
  100% {
    transform: rotateY(0deg) scale(1);
  }
}

/* Answer reveal animation */
.answer-reveal {
  animation: answerReveal 0.3s ease-out;
}

@keyframes answerReveal {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Card entrance animation */
.card-enter {
  animation: cardEnter 0.25s ease-out;
}

@keyframes cardEnter {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Smooth progress bar animation */
.progress-bar-animated {
  transition: width 0.3s ease-out;
}

/* Slide down animation for notifications */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translate(-50%, -100%);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

.animate-slide-down {
  animation: slideDown 0.3s ease-out;
}

/* Pulse animation for highlights */
@keyframes gentlePulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.02);
    opacity: 0.9;
  }
}

.animate-gentle-pulse {
  animation: gentlePulse 2s ease-in-out infinite;
}

/* Shake animation for errors */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-4px); }
  40% { transform: translateX(4px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

.animate-shake {
  animation: shake 0.4s ease-out;
}

/* Bounce in animation */
@keyframes bounceIn {
  0% {
    opacity: 0;
    transform: scale(0.3);
  }
  50% {
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-bounce-in {
  animation: bounceIn 0.5s ease-out;
}

/* Fade scale animation for modal backgrounds */
@keyframes fadeScale {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-fade-scale {
  animation: fadeScale 0.2s ease-out;
}

/* Streak fire animation */
@keyframes fireFlicker {
  0%, 100% {
    transform: scale(1) rotate(0deg);
    filter: brightness(1);
  }
  25% {
    transform: scale(1.1) rotate(-3deg);
    filter: brightness(1.2);
  }
  50% {
    transform: scale(1.05) rotate(2deg);
    filter: brightness(1.1);
  }
  75% {
    transform: scale(1.15) rotate(-2deg);
    filter: brightness(1.3);
  }
}

.animate-fire {
  animation: fireFlicker 0.5s ease-in-out infinite;
}

/* Progress ring animation */
@keyframes progressRing {
  from {
    stroke-dashoffset: 100;
  }
  to {
    stroke-dashoffset: 0;
  }
}

.animate-progress-ring {
  animation: progressRing 1s ease-out forwards;
}

/* Glow effect for achievements */
@keyframes glow {
  0%, 100% {
    box-shadow: 0 0 5px currentColor;
  }
  50% {
    box-shadow: 0 0 20px currentColor, 0 0 30px currentColor;
  }
}

.animate-glow {
  animation: glow 2s ease-in-out infinite;
}

/* XP gain float animation */
@keyframes xpFloat {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.8);
  }
  20% {
    opacity: 1;
    transform: translateY(0) scale(1.1);
  }
  40% {
    transform: translateY(-10px) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-40px) scale(0.9);
  }
}

.animate-xp-float {
  animation: xpFloat 1.5s ease-out forwards;
}

/* Mastery badge pulse */
@keyframes masteryPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

.animate-mastery-pulse {
  animation: masteryPulse 0.3s ease-out;
}
